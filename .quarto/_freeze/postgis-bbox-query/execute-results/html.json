{
  "hash": "63a7d64b8f1bca58ebe787430f6538f8",
  "result": {
    "markdown": "---\ntitle: PostgreSQL GIS Query by Bounding Box\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rnaturalearth)\nlibrary(sf)\nlibrary(ggplot2)\nsource(\"R/postgis.R\")\n```\n:::\n\n\n# Geospatial Extent\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Geospatial Extent](postgis-bbox-query_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n# Which military sites are in the geospatial extent?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create bounding box\nbbox <- st_bbox(p202r24)\n\n# query database\ndb <- connect_postgres()\n\n# build query\nq <- query_bounding_box(bbox[1], bbox[2], bbox[3], bbox[4], tbl = \"mil_boundaries_osm\")\nq2 <- query_bounding_box(bbox[1], bbox[2], bbox[3], bbox[4])\nboundaries <- st_read(db, query = q)\nbuildings <- st_read(db, query = q2)\nDBI::dbDisconnect(db)\n\n# clip to extent\nboundaries <- boundaries[p202r24,]\nbuildings <- buildings[p202r24,]\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = p202r24, fill = NA, colour = \"black\", inherit.aes = FALSE) + \n  geom_sf(data = boundaries, fill = \"red\", colour = NA, alpha = 0.2, inherit.aes = FALSE)\n```\n\n::: {.cell-output-display}\n![Boundaries](postgis-bbox-query_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nhead(boundaries)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 6 features and 245 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: -2.171208 ymin: 51.20075 xmax: -2.050753 ymax: 51.23485\nGeodetic CRS:  WGS 84\n      osm_id                           name abandoned.landuse access aeroway\n27  97303669           Battlesbury Barracks              <NA>   <NA>    <NA>\n28  97303671 Warminster Land Warfare Centre              <NA>   <NA>    <NA>\n29 198746407                       St Giles              <NA>   <NA>    <NA>\n30 252278280                           <NA>              <NA>   <NA>    <NA>\n31 252278483                           <NA>              <NA>   <NA>    <NA>\n32 252278484                           <NA>              <NA>   <NA>    <NA>\n   area building bunker_type description disused.aeroway historic icao  landuse\n27 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA> military\n28 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA> military\n29 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA>     <NA>\n30 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA> military\n31 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA> military\n32 <NA>     <NA>        <NA>        <NA>            <NA>     <NA> <NA> military\n   layer military historic.civilization military_service             operator\n27  <NA> barracks                  <NA>             <NA>                 <NA>\n28  <NA> barracks                  <NA>             <NA>                 <NA>\n29  <NA>     <NA>                  <NA>             <NA> Diocese of Salisbury\n30  <NA> barracks                  <NA>             <NA>                 <NA>\n31  <NA> barracks                  <NA>             <NA>                 <NA>\n32  <NA> barracks                  <NA>             <NA>                 <NA>\n   trench wheelchair  wikidata wikipedia building.colour building.levels fixme\n27   <NA>       <NA> Q19871094      <NA>            <NA>            <NA>  <NA>\n28   <NA>       <NA> Q19972061      <NA>            <NA>            <NA>  <NA>\n29   <NA>       <NA>      <NA>      <NA>            <NA>            <NA>  <NA>\n30   <NA>       <NA>      <NA>      <NA>            <NA>            <NA>  <NA>\n31   <NA>       <NA>      <NA>      <NA>            <NA>            <NA>  <NA>\n32   <NA>       <NA>      <NA>      <NA>            <NA>            <NA>  <NA>\n   image mineshaft_type roof.colour roof.shape alt_name disused old_name source\n27  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n28  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n29  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n30  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n31  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n32  <NA>           <NA>        <NA>       <NA>     <NA>    <NA>     <NA>   <NA>\n   website barrier material note HE_ref abandoned addr.city addr.housename\n27    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n28    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n29    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n30    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n31    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n32    <NA>    <NA>     <NA> <NA>   <NA>      <NA>      <NA>           <NA>\n   addr.place addr.postcode    amenity building.material building.structure\n27       <NA>          <NA>       <NA>              <NA>               <NA>\n28       <NA>          <NA>       <NA>              <NA>               <NA>\n29       <NA>          <NA> grave_yard              <NA>               <NA>\n30       <NA>          <NA>       <NA>              <NA>               <NA>\n31       <NA>          <NA>       <NA>              <NA>               <NA>\n32       <NA>          <NA>       <NA>              <NA>               <NA>\n   depth derelict field_shelter foot healthcare height heritage\n27  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n28  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n29  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n30  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n31  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n32  <NA>     <NA>          <NA> <NA>       <NA>   <NA>     <NA>\n   heritage.operator highway horse listed_status location natural  ref\n27              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n28              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n29              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n30              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n31              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n32              <NA>    <NA>  <NA>          <NA>     <NA>    <NA> <NA>\n   roof.material roof.structure ruins shelter_type sport start_date surface\n27          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n28          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n29          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n30          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n31          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n32          <NA>           <NA>  <NA>         <NA>  <NA>       <NA>    <NA>\n   usage vehicle width airspace historic.period lower_limit upper_limit fenced\n27  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n28  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n29  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n30  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n31  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n32  <NA>    <NA>  <NA>     <NA>            <NA>        <NA>        <NA>   <NA>\n   defensive_works wall waterway operator.type aerodrome.type boundary\n27            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n28            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n29            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n30            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n31            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n32            <NA> <NA>     <NA>          <NA>           <NA>     <NA>\n   designation  ele is_in addr.state addr.street covered noname owner\n27        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n28        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n29        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n30        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n31        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n32        <NA> <NA>  <NA>       <NA>        <NA>    <NA>   <NA>  <NA>\n   pillbox.type ref.Cassini ref.pen_number roof.surface iata  religion\n27         <NA>        <NA>           <NA>         <NA> <NA>      <NA>\n28         <NA>        <NA>           <NA>         <NA> <NA>      <NA>\n29         <NA>        <NA>           <NA>         <NA> <NA> christian\n30         <NA>        <NA>           <NA>         <NA> <NA>      <NA>\n31         <NA>        <NA>           <NA>         <NA> <NA>      <NA>\n32         <NA>        <NA>           <NA>         <NA> <NA>      <NA>\n   fence_type short_name addr.housenumber source.outline abandoned.building\n27       <NA>       <NA>             <NA>           <NA>               <NA>\n28       <NA>       <NA>             <NA>           <NA>               <NA>\n29       <NA>       <NA>             <NA>           <NA>               <NA>\n30       <NA>       <NA>             <NA>           <NA>               <NA>\n31       <NA>       <NA>             <NA>           <NA>               <NA>\n32       <NA>       <NA>             <NA>           <NA>               <NA>\n   gun_emplacement_type level place source.name  url construction_date\n27                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n28                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n29                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n30                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n31                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n32                 <NA>  <NA>  <NA>        <NA> <NA>              <NA>\n   defensive tank_trap addr.district addr.village source.geometry ref.esher\n27      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n28      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n29      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n30      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n31      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n32      <NA>      <NA>          <NA>         <NA>            <NA>      <NA>\n   ref.thekeep source.building wikimedia_commons wikimedia_commons.pano\n27        <NA>            <NA>              <NA>                   <NA>\n28        <NA>            <NA>              <NA>                   <NA>\n29        <NA>            <NA>              <NA>                   <NA>\n30        <NA>            <NA>              <NA>                   <NA>\n31        <NA>            <NA>              <NA>                   <NA>\n32        <NA>            <NA>              <NA>                   <NA>\n   wikimedia_commons_1 brand man_made structure description.de description.en\n27                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n28                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n29                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n30                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n31                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n32                <NA>  <NA>     <NA>      <NA>           <NA>           <NA>\n   maxspeed maxspeed.type name.en ruins.building tourism name.cy\n27     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n28     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n29     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n30     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n31     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n32     <NA>          <NA>    <NA>           <NA>    <NA>    <NA>\n   operational_status colour end_date fixme2 historic.military electrified\n27               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n28               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n29               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n30               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n31               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n32               <NA>   <NA>     <NA>   <NA>              <NA>        <NA>\n   admin_level leisure postal_code shooting training_ground fhrs.id source.addr\n27        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n28        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n29        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n30        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n31        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n32        <NA>    <NA>        <NA>     <NA>            <NA>    <NA>        <NA>\n   addr.country addr.suburb created_by military_1 name.de name.fr name.ru\n27         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n28         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n29         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n30         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n31         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n32         <NA>        <NA>       <NA>       <NA>    <NA>    <NA>    <NA>\n   name.uk office pillbox_type source.shape addr.county ref.GB.uprn\n27    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n28    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n29    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n30    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n31    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n32    <NA>   <NA>         <NA>         <NA>        <NA>        <NA>\n   seamark.restricted_area.restriction seamark.type shop contact.website\n27                                <NA>         <NA> <NA>            <NA>\n28                                <NA>         <NA> <NA>            <NA>\n29                                <NA>         <NA> <NA>            <NA>\n30                                <NA>         <NA> <NA>            <NA>\n31                                <NA>         <NA> <NA>            <NA>\n32                                <NA>         <NA> <NA>            <NA>\n   ref.cadw Military_Unit.1 Military_Unit.2 Military_Unit.3 lanes oneway\n27     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n28     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n29     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n30     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n31     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n32     <NA>            <NA>            <NA>            <NA>  <NA>   <NA>\n   aerodrome source.icao closed heritage.website private length type\n27      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n28      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n29      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n30      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n31      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n32      <NA>        <NA>   <NA>             <NA>    <NA>   <NA> <NA>\n   fhrs.authority fhrs.local_authority_id phone geograph.id\n27           <NA>                    <NA>  <NA>        <NA>\n28           <NA>                    <NA>  <NA>        <NA>\n29           <NA>                    <NA>  <NA>        <NA>\n30           <NA>                    <NA>  <NA>        <NA>\n31           <NA>                    <NA>  <NA>        <NA>\n32           <NA>                    <NA>  <NA>        <NA>\n   source.addr.postcode bunker.type closest_town  dog leaf_cycle leaf_type\n27                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n28                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n29                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n30                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n31                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n32                 <NA>        <NA>         <NA> <NA>       <NA>      <NA>\n   bunker website.RAF height.median regiment training not.addr.postcode\n27   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n28   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n29   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n30   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n31   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n32   <NA>        <NA>          <NA>     <NA>     <NA>              <NA>\n   operator.en disused.natural disused.water military. police tower addr.town\n27        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n28        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n29        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n30        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n31        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n32        <NA>            <NA>          <NA>      <NA>   <NA>  <NA>      <NA>\n   inscription tidal email source.postcode tower.type disused.military name.sco\n27        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n28        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n29        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n30        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n31        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n32        <NA>  <NA>  <NA>            <NA>       <NA>             <NA>     <NA>\n   source.military club disused.landuse abandoned.bunker_type\n27            <NA> <NA>            <NA>                  <NA>\n28            <NA> <NA>            <NA>                  <NA>\n29            <NA> <NA>            <NA>                  <NA>\n30            <NA> <NA>            <NA>                  <NA>\n31            <NA> <NA>            <NA>                  <NA>\n32            <NA> <NA>            <NA>                  <NA>\n   seamark.beacon_cardinal.category seamark.topmark.shape name.old ship.type\n27                             <NA>                  <NA>     <NA>      <NA>\n28                             <NA>                  <NA>     <NA>      <NA>\n29                             <NA>                  <NA>     <NA>      <NA>\n30                             <NA>                  <NA>     <NA>      <NA>\n31                             <NA>                  <NA>     <NA>      <NA>\n32                             <NA>                  <NA>     <NA>      <NA>\n   ref.nsa demolished.building amenity.1969.1992 name.1958.1964 name.1969.1992\n27    <NA>                <NA>              <NA>           <NA>           <NA>\n28    <NA>                <NA>              <NA>           <NA>           <NA>\n29    <NA>                <NA>              <NA>           <NA>           <NA>\n30    <NA>                <NA>              <NA>           <NA>           <NA>\n31    <NA>                <NA>              <NA>           <NA>           <NA>\n32    <NA>                <NA>              <NA>           <NA>           <NA>\n   name.1993.2010 source.1969.1992 source.1993.2010 wikimedia_commons.video\n27           <NA>             <NA>             <NA>                    <NA>\n28           <NA>             <NA>             <NA>                    <NA>\n29           <NA>             <NA>             <NA>                    <NA>\n30           <NA>             <NA>             <NA>                    <NA>\n31           <NA>             <NA>             <NA>                    <NA>\n32           <NA>             <NA>             <NA>                    <NA>\n   capacity industrial loc_name disused.fhrs.id historic.aeroway hazard\n27     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n28     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n29     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n30     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n31     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n32     <NA>       <NA>     <NA>            <NA>             <NA>   <NA>\n   note.access FIXME source.operator bicycle motor_vehicle community_centre\n27        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n28        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n29        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n30        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n31        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n32        <NA>  <NA>            <NA>    <NA>          <NA>             <NA>\n   name_1 name_2 name_3 occupier previous_name addr.locality landcover\n27   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n28   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n29   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n30   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n31   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n32   <NA>   <NA>   <NA>     <NA>          <NA>          <NA>      <NA>\n   military.branch name.historic source.area logainm.ref logainm.url name.ga\n27            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n28            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n29            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n30            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n31            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n32            <NA>          <NA>        <NA>        <NA>        <NA>    <NA>\n   tenant opening_hours                       geometry\n27   <NA>          <NA> POLYGON ((-2.16199 51.20263...\n28   <NA>          <NA> POLYGON ((-2.161941 51.2109...\n29   <NA>          <NA> POLYGON ((-2.051569 51.2348...\n30   <NA>          <NA> POLYGON ((-2.159604 51.2063...\n31   <NA>          <NA> POLYGON ((-2.166669 51.2067...\n32   <NA>          <NA> POLYGON ((-2.158473 51.2051...\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = p202r24, fill = NA, colour = \"black\", inherit.aes = FALSE) + \n  geom_sf(data = buildings, fill = \"red\", colour = \"red\", alpha = 0.2, inherit.aes = FALSE)\n```\n\n::: {.cell-output-display}\n![Buildings](postgis-bbox-query_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nhead(buildings)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 6 features and 5 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: -2.107443 ymin: 52.60725 xmax: -2.106043 ymax: 52.60865\nGeodetic CRS:  WGS 84\n                                    ID DISTNAME BUILDGTHEM CLASSIFICA FEATCODE\n1 B563AA38-2AC7-4171-8D9D-1C74CD5FBADA     <NA>       <NA>       <NA>    15014\n2 7F745932-FBD8-45F2-9DC8-6B5BBEA9CF3A     <NA>       <NA>       <NA>    15014\n3 C97B110A-86ED-413A-913A-8E2F88CD0DEA     <NA>       <NA>       <NA>    15014\n4 E5FD1E99-2DD0-4634-830C-225BABD484F7     <NA>       <NA>       <NA>    15014\n5 4FFC5598-C446-4BA3-BF45-FD39FD3F155F     <NA>       <NA>       <NA>    15014\n6 1CEF1863-D30B-4A26-BAB8-A1B8276F955A     <NA>       <NA>       <NA>    15014\n                        geometry\n1 POLYGON ((-2.10701 52.60848...\n2 POLYGON ((-2.106813 52.6084...\n3 POLYGON ((-2.10618 52.6085,...\n4 POLYGON ((-2.106225 52.6084...\n5 POLYGON ((-2.106179 52.6083...\n6 POLYGON ((-2.107314 52.6080...\n```\n:::\n:::\n",
    "supporting": [
      "postgis-bbox-query_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}